<?xml version="1.0" encoding="utf-8" ?>
<Patch>
	
  <!-- Add new abilities to insectoids -->
  
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[defName = "Megascarab" or defName = "Spelopede" or defName = "Megaspider"]/comps</xpath>
    <value>
        <li Class="AnimalBehaviours.CompProperties_DiseaseImmunity">
		<hediffsToRemove>
			<li>Animal_Plague</li>
			<li>Animal_Flu</li>
			<li>AB_AnimalSporesAllergy</li>
		</hediffsToRemove>
		<tickInterval>2000</tickInterval>
	</li>
    </value>
  </Operation>
	
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[defName = "Megascarab"]/comps</xpath>
    <value>
	<li Class="CompProperties_Milkable">
          <milkDef>InsectJelly</milkDef>
          <milkIntervalDays>1</milkIntervalDays>
     	  <milkAmount>6</milkAmount>
    	  <milkFemaleOnly>false</milkFemaleOnly>
    	</li>
    </value>
  </Operation>

  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[defName = "Spelopede"]/comps</xpath>
    <value>
	<li Class="AnimalBehaviours.CompProperties_AcidImmunity">		
	</li>
    </value>
  </Operation>

  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[defName = "Megaspider"]/comps</xpath>
    <value>
	<li Class="AnimalBehaviours.CompProperties_DigPeriodically">
		<customThingToDig>			
			<li>ChunkSandstone</li>
			<li>ChunkGranite</li>
			<li>ChunkLimestone</li>
			<li>ChunkSlate</li>
			<li>ChunkMarble</li>
			<li>ChunkSandstone</li>
			<li>ChunkGranite</li>
			<li>ChunkLimestone</li>
			<li>ChunkSlate</li>
			<li>ChunkMarble</li>
			<li>ChunkSandstone</li>
			<li>ChunkGranite</li>
			<li>ChunkLimestone</li>
			<li>ChunkSlate</li>
			<li>ChunkMarble</li>
			<li>ChunkSandstone</li>
			<li>ChunkGranite</li>
			<li>ChunkLimestone</li>
			<li>ChunkSlate</li>
			<li>ChunkMarble</li>
			<li>ChunkSandstone</li>
			<li>ChunkGranite</li>
			<li>ChunkLimestone</li>
			<li>ChunkSlate</li>
			<li>Steel</li>
			<li>Steel</li>
			<li>Jade</li>
			<li>Gold</li>
			<li>Plasteel</li>
			<li>Silver</li>			
		</customThingToDig>
		<customAmountToDig>				
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>1</li>
			<li>25</li>
			<li>25</li>
			<li>10</li>
			<li>10</li>
			<li>10</li>
			<li>10</li>		
		</customAmountToDig>
		<ticksToDig>60000</ticksToDig>
	</li>
    </value>
  </Operation>
  

  <DamageDef>
		<defName>MM_AcidicBreath</defName>
		<label>acidic breath</label>
		<workerClass>DamageWorker_AddInjury</workerClass>
		<externalViolence>true</externalViolence>
		<hediff>VEF_AcidBurn</hediff>
		<defaultDamage>1</defaultDamage>

		<deathMessage>{0} has been poisoned to death.</deathMessage>
		<additionalHediffs>
			<li>
				<hediff>VEF_AcidBuildup</hediff>
				<severityPerDamageDealt>0.01</severityPerDamageDealt>
				<victimSeverityScaling>ToxicSensitivity</victimSeverityScaling>
			</li>
		</additionalHediffs>

		<harmAllLayersUntilOutside>true</harmAllLayersUntilOutside>

		<armorCategory>Heat</armorCategory>
	</DamageDef>
</Patch>
